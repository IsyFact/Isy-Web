<html xmlns="http://www.w3.org/1999/xhtml" xmlns:composite="http://java.sun.com/jsf/composite"
    xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets" 
    xmlns:isyi="http://java.sun.com/jsf/composite/isyfact/internal"
    xmlns:isy="http://java.sun.com/jsf/composite/isyfact"
    >

<!-- Ein Dropdownmenü innerhalb Formularen. -->

<composite:interface>

    <!-- Die Referenz des Objekts. -->
    <composite:attribute name="reference" required="true" />
    <!-- Der Wert der Auswahl für das Databinding -->
    <composite:attribute name="value" required="true" />
    <!-- dieses Attribut wird im Sinne von bootstrap-selectlist.js interpretiert, d.h. gibt die Anzahl der Zeilen die sichtbar sind -->
    <composite:attribute name="size" />
    <!-- Ob die Liste deaktiviert ist. -->
    <composite:attribute name="disabled" type="Boolean" default="false" />
    <!-- Der Text für das Label -->
    <composite:attribute name="label" type="String" required="false" />
    <!-- Die CSS-Klasse für das Label. -->
    <composite:attribute name="labelStyleClass" type="String" default="col-lg-6" />
    <!-- Die CSS-Klasse für den Eingabebereich. -->
    <composite:attribute name="inputStyleClass" type="String" default="col-lg-6" />
    <!-- Ein spezifisches Validation-Model, falls benötigt. -->
    <composite:attribute name="validationModel" required="false" default="#{validationModel}" />
    <!-- Eine spezifsche globale Konfiguration, falls benötigt. -->
    <composite:attribute name="globalConfig" required="false" default="#{globalConfigurationModel}" />

</composite:interface>

<composite:implementation>

    <!-- Validierungsfehler bestimmen -->
    <ui:param name="validationMessages"
        value="#{cc.attrs.validationModel.getValidationMessagesForReference(cc.attrs.reference)}" />
    <ui:param name="existsValidationError" value="#{not empty validationMessages}" />

    <div class="form-group#{existsValidationError ? ' has-error has-feedback': ''}">

        <isyi:formValidationLabel value="#{cc.attrs.label}"
            forField="#{cc.clientId}:isyBrowseAndCollect:#{jsfHelper.escapeIdentifier(cc.attrs.reference)}"
            required="#{cc.attrs.required}" styleClass="#{cc.attrs.labelStyleClass}" />

        <div class="#{cc.attrs.inputStyleClass}">
            <isy:browseAndCollect id="isyBrowseAndCollect" reference="#{cc.attrs.reference}" value="#{cc.attrs.value}" size="#{cc.attrs.size}" disabled="#{cc.attrs.disabled}" browsecollectStyleClass="form-browsecollect">
               <composite:insertChildren />
            </isy:browseAndCollect>
        </div>

        <!-- Bei Validierungsfehlern -->
        <isyi:formValidationIcon validationModel="#{cc.attrs.validationModel}"
            reference="#{cc.attrs.reference}" inputGroupAddonExistent="false" />
    </div>
</composite:implementation>

</html>
